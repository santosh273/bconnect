webpackJsonp([16],{680:function(l,n,t){"use strict";function e(l){return o["ɵvid"](0,[o["ɵqud"](402653184,1,{mapElement:0}),(l()(),o["ɵted"](-1,null,["\n"])),(l()(),o["ɵeld"](2,0,null,null,10,"ion-header",[],null,null,null,null,null)),o["ɵdid"](3,16384,null,0,L.a,[y.a,o.ElementRef,o.Renderer,[2,M.a]],null,null),(l()(),o["ɵted"](-1,null,["\n\n  "])),(l()(),o["ɵeld"](5,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,R.b,R.a)),o["ɵdid"](6,49152,null,0,w.a,[D.a,[2,M.a],[2,E.a],y.a,o.ElementRef,o.Renderer],null,null),(l()(),o["ɵted"](-1,3,["\n    "])),(l()(),o["ɵeld"](8,0,null,3,2,"ion-title",[],null,null,null,_.b,_.a)),o["ɵdid"](9,49152,null,0,k.a,[y.a,o.ElementRef,o.Renderer,[2,N.a],[2,w.a]],null,null),(l()(),o["ɵted"](-1,0,["Map"])),(l()(),o["ɵted"](-1,3,["\n  "])),(l()(),o["ɵted"](-1,null,["\n\n"])),(l()(),o["ɵted"](-1,null,["\n\n\n"])),(l()(),o["ɵeld"](14,0,null,null,47,"ion-content",[["class","bg"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,P.b,P.a)),o["ɵdid"](15,4374528,null,0,F.a,[y.a,I.a,O.a,o.ElementRef,o.Renderer,D.a,S.a,o.NgZone,[2,M.a],[2,E.a]],null,null),(l()(),o["ɵted"](-1,1,["\n  "])),(l()(),o["ɵted"](-1,1,["\n\n  "])),(l()(),o["ɵeld"](18,0,null,1,27,"ion-row",[["class","row"],["padding",""],["style","margin-top: 40px;border: 2px solid white"]],null,null,null,null,null)),o["ɵdid"](19,16384,null,0,A.a,[],null,null),(l()(),o["ɵted"](-1,null,[" \n   "])),(l()(),o["ɵeld"](21,0,null,null,3,"ion-col",[["class","col"],["col-3",""]],null,null,null,null,null)),o["ɵdid"](22,16384,null,0,T.a,[],null,null),(l()(),o["ɵted"](-1,null,[" "])),(l()(),o["ɵeld"](24,0,null,null,0,"img",[["align","left"],["src","assets/imgs/marker.png"]],null,null,null,null,null)),(l()(),o["ɵted"](-1,null,["\n   "])),(l()(),o["ɵeld"](26,0,null,null,18,"ion-col",[["class","col"],["col-9",""],["style","color: blanchedalmond"]],null,null,null,null,null)),o["ɵdid"](27,16384,null,0,T.a,[],null,null),(l()(),o["ɵted"](-1,null,["\n    "])),(l()(),o["ɵeld"](29,0,null,null,0,"div",[["style","height: 10px"]],null,null,null,null,null)),(l()(),o["ɵted"](-1,null,["\n    "])),(l()(),o["ɵted"](-1,null,["\n   \n    "])),(l()(),o["ɵeld"](32,0,null,null,9,"h5",[["style","color: black;"]],null,null,null,null,null)),(l()(),o["ɵted"](-1,null,["Latitude,Longitude: \n      \n      "])),(l()(),o["ɵted"](-1,null,["\n    "])),(l()(),o["ɵeld"](35,0,null,null,5,"input",[["placeholder","Latitude,Longitude"],["style"," border: 2px solid #0091DF;padding-left: 4px; color: black;background: transparent;"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var e=!0,a=l.component;if("input"===n){e=!1!==o["ɵnov"](l,36)._handleInput(t.target.value)&&e}if("blur"===n){e=!1!==o["ɵnov"](l,36).onTouched()&&e}if("compositionstart"===n){e=!1!==o["ɵnov"](l,36)._compositionStart()&&e}if("compositionend"===n){e=!1!==o["ɵnov"](l,36)._compositionEnd(t.target.value)&&e}if("ngModelChange"===n){e=!1!==(a.latlng=t)&&e}return e},null,null)),o["ɵdid"](36,16384,null,0,x.DefaultValueAccessor,[o.Renderer2,o.ElementRef,[2,x.COMPOSITION_BUFFER_MODE]],null,null),o["ɵprd"](1024,null,x.NG_VALUE_ACCESSOR,function(l){return[l]},[x.DefaultValueAccessor]),o["ɵdid"](38,671744,null,0,x.NgModel,[[8,null],[8,null],[8,null],[2,x.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),o["ɵprd"](2048,null,x.NgControl,null,[x.NgModel]),o["ɵdid"](40,16384,null,0,x.NgControlStatus,[x.NgControl],null,null),(l()(),o["ɵted"](-1,null,["\n    "])),(l()(),o["ɵted"](-1,null,["\n    "])),(l()(),o["ɵted"](-1,null,["\n    "])),(l()(),o["ɵted"](-1,null,["\n   \n  "])),(l()(),o["ɵted"](-1,null,["\n  "])),(l()(),o["ɵted"](-1,1,["\n  "])),(l()(),o["ɵeld"](47,0,null,1,6,"div",[["style","margin-top: 3vh;"],["text-center",""]],null,null,null,null,null)),(l()(),o["ɵted"](-1,null,["\n    "])),(l()(),o["ɵeld"](49,0,null,null,2,"button",[["ion-button",""]],null,[[null,"click"]],function(l,n,t){var e=!0;if("click"===n){e=!1!==l.component.openmap()&&e}return e},V.b,V.a)),o["ɵdid"](50,1097728,null,0,U.a,[[8,""],y.a,o.ElementRef,o.Renderer],null,null),(l()(),o["ɵted"](-1,0,["Open Map"])),(l()(),o["ɵted"](-1,null,["\n    "])),(l()(),o["ɵted"](-1,null,["\n  "])),(l()(),o["ɵted"](-1,1,["\n  "])),(l()(),o["ɵeld"](55,0,null,1,5,"div",[["style","margin-top: 3vh;"],["text-center",""]],null,null,null,null,null)),(l()(),o["ɵted"](-1,null,["\n    "])),(l()(),o["ɵeld"](57,0,null,null,2,"button",[["ion-button",""]],null,[[null,"click"]],function(l,n,t){var e=!0;if("click"===n){e=!1!==l.component.done()&&e}return e},V.b,V.a)),o["ɵdid"](58,1097728,null,0,U.a,[[8,""],y.a,o.ElementRef,o.Renderer],null,null),(l()(),o["ɵted"](-1,0,["Done"])),(l()(),o["ɵted"](-1,null,["\n  "])),(l()(),o["ɵted"](-1,1,["\n"])),(l()(),o["ɵted"](-1,null,["\n"]))],function(l,n){l(n,38,0,n.component.latlng)},function(l,n){l(n,5,0,o["ɵnov"](n,6)._hidden,o["ɵnov"](n,6)._sbPadding);l(n,14,0,o["ɵnov"](n,15).statusbarPadding,o["ɵnov"](n,15)._hasRefresher);l(n,35,0,o["ɵnov"](n,40).ngClassUntouched,o["ɵnov"](n,40).ngClassTouched,o["ɵnov"](n,40).ngClassPristine,o["ɵnov"](n,40).ngClassDirty,o["ɵnov"](n,40).ngClassValid,o["ɵnov"](n,40).ngClassInvalid,o["ɵnov"](n,40).ngClassPending)})}Object.defineProperty(n,"__esModule",{value:!0});var o=t(1),a=(t(0),t(32),t(226)),u=t(29),i=t(79),d=t(54),s=function(){function l(l,n,t,e,o,a){this.toastCtrl=l,this.loadingCtrl=n,this.nativeStorage=t,this.navCtrl=e,this.geolocation=o,this.http=a,this.customerData=[]}return l.prototype.ionViewDidLeave=function(){this.save(this.lat,this.lng)},l.prototype.openmap=function(){window.open("https://www.google.com/maps","_system")},l.prototype.filldealerdata=function(l){var n=this;this.http.get(i.a.URL+"getdealermapdata").map(function(l){return l.json()}).subscribe(function(t){var e=JSON.parse(t);n.customerData=e,console.log(n.customerData),console.log("data for map");var o,a,u=new google.maps.InfoWindow;for(a=0;a<n.customerData.length;a++)o=new google.maps.Marker({position:new google.maps.LatLng(n.customerData[a].lat,n.customerData[a].lng),map:l}),google.maps.event.addListener(o,"click",function(n,t){return function(){u.setContent(this.customerData[t].customerno+"<br>"+this.customerData[t].customername),u.open(l,n)}}(o,a))})},l.prototype.ionViewDidLoad=function(){this.getlocation()},l.prototype.getlocation=function(){var l=this;this.geolocation.getCurrentPosition().then(function(n){new google.maps.LatLng(n.coords.latitude,n.coords.longitude);console.log(n.coords.latitude),console.log(n.coords.longitude),l.lat=n.coords.latitude,l.lng=n.coords.longitude},function(l){console.log(l)})},l.prototype.loadMap=function(){var l=this,n=this.loadingCtrl.create({content:"Loading Map..."});n.present(),this.geolocation.getCurrentPosition().then(function(t){var e=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);console.log(t.coords.latitude),console.log(t.coords.longitude),l.lat=t.coords.latitude,l.lng=t.coords.longitude,n.dismissAll();var o={center:e,zoom:16,mapTypeId:google.maps.MapTypeId.ROADMAP};l.map=new google.maps.Map(l.mapElement.nativeElement,o),l.addMarker(),l.filldealerdata(l.map)},function(l){console.log(l)})},l.prototype.addMarker=function(){var l=new google.maps.Marker({map:this.map,draggable:!0,icon:{url:"assets/imgs/marker.png",scaledSize:{width:80,height:85}},animation:google.maps.Animation.DROP,position:this.map.getCenter()});console.log(l.Geoposition),console.log("Taimoor");var n="<h4>Lat: "+this.lat+"<br>Lng: "+this.lng+"</h4>";new google.maps.InfoWindow({content:n}).open(this.map,l),this.addInfoWindow(l,n),this.save(this.lat,this.lng),this.presentToast("Your Location has been saved")},l.prototype.addInfoWindow=function(l,n){var t=this;google.maps.event.addListener(l,"drag",function(){var n=l.getPosition().lat(),e=l.getPosition().lng();t.lat=n,t.lng=e;var o="<h4>Lat: "+n+"<br>Lng: "+e+"</h4>",a=new google.maps.InfoWindow({content:o});console.log(l.Geoposition),console.log("loc",n,e),t.save(n,e),a.open(t.map,l)}),this.presentToast("Your Location has been saved")},l.prototype.done=function(){if(console.log(this.latlng,"this.latlng"),null!=this.latlng)if(this.latlng.includes(",")){var l=this.latlng.split(",");this.lat=l[0],console.log(this.lat,"this.lat modified"),this.lng=l[1],console.log(this.lng,"this.lng modified"),this.navCtrl.pop()}else this.presentToast("Ordinates must contains comma (Latitude,Longitude)");else this.presentToast("Please enter lattitude and longitude")},l.prototype.presentToast=function(l){this.toastCtrl.create({message:l,duration:3e3,position:"center"}).present()},l.prototype.save=function(l,n){this.nativeStorage.setItem("loc",{lat:l,lng:n}).then(function(){return console.log("Stored loc! lat , lng "+l+" ,"+n)},function(l){return console.error("Error storing loc",l)})},l}(),r=function(){return function(){}}(),c=t(213),g=t(214),p=t(215),m=t(216),h=t(217),f=t(218),v=t(219),b=t(220),C=t(221),L=t(53),y=t(3),M=t(7),R=t(70),w=t(36),D=t(8),E=t(20),_=t(163),k=t(73),N=t(38),P=t(52),F=t(25),I=t(5),O=t(9),S=t(24),A=t(71),T=t(72),x=t(19),V=t(26),U=t(17),W=t(82),z=t(62),G=o["ɵcrt"]({encapsulation:2,styles:[],data:{}}),B=o["ɵccf"]("page-map",s,function(l){return o["ɵvid"](0,[(l()(),o["ɵeld"](0,0,null,null,1,"page-map",[],null,null,null,e,G)),o["ɵdid"](1,49152,null,0,s,[W.a,z.a,u.a,E.a,a.a,d.e],null,null)],null,null)},{},{},[]),j=t(14),J=t(162),Y=t(61);t.d(n,"MapPageModuleNgFactory",function(){return q});var q=o["ɵcmf"](r,[],function(l){return o["ɵmod"]([o["ɵmpd"](512,o.ComponentFactoryResolver,o["ɵCodegenComponentFactoryResolver"],[[8,[c.a,g.a,p.a,m.a,h.a,f.a,v.a,b.a,C.a,B]],[3,o.ComponentFactoryResolver],o.NgModuleRef]),o["ɵmpd"](4608,j.NgLocalization,j.NgLocaleLocalization,[o.LOCALE_ID,[2,j["ɵa"]]]),o["ɵmpd"](4608,x["ɵi"],x["ɵi"],[]),o["ɵmpd"](4608,x.FormBuilder,x.FormBuilder,[]),o["ɵmpd"](512,j.CommonModule,j.CommonModule,[]),o["ɵmpd"](512,x["ɵba"],x["ɵba"],[]),o["ɵmpd"](512,x.FormsModule,x.FormsModule,[]),o["ɵmpd"](512,x.ReactiveFormsModule,x.ReactiveFormsModule,[]),o["ɵmpd"](512,J.a,J.a,[]),o["ɵmpd"](512,J.b,J.b,[]),o["ɵmpd"](512,r,r,[]),o["ɵmpd"](256,Y.a,s,[])])})}});