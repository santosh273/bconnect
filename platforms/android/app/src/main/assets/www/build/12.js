webpackJsonp([12],{684:function(n,l,e){"use strict";function t(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,0,null,null,19,"div",[],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n    "])),(n()(),a["ɵeld"](2,0,null,null,16,"div",[["style","padding-top: 25px;text-align: center;padding-bottom: 25px"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n\n      "])),(n()(),a["ɵeld"](4,0,null,null,13,"button",[["block",""],["icon-right",""],["ion-button",""],["item-end",""],["style","padding-top: 25px;padding-bottom: 25px;width: 80%;margin-left: 10%"]],null,[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.gotoNoti(n.context.$implicit.name,n.context.$implicit.UnRead)&&t}return t},L.b,L.a)),a["ɵdid"](5,1097728,null,0,P.a,[[8,""],w.a,a.ElementRef,a.Renderer],{block:[0,"block"]},null),(n()(),a["ɵted"](-1,0,["\n      "])),(n()(),a["ɵeld"](7,0,null,0,2,"ion-label",[["align","left"]],null,null,null,null,null)),a["ɵdid"](8,16384,null,0,I.a,[w.a,a.ElementRef,a.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a["ɵted"](9,null,[" ",""])),(n()(),a["ɵted"](-1,0,[" \n        "])),(n()(),a["ɵeld"](11,0,null,0,1,"ion-icon",[["name","md-notifications"],["role","img"],["style","font-size: 2.0em;"]],[[2,"hide",null]],null,null,null,null)),a["ɵdid"](12,147456,null,0,E.a,[w.a,a.ElementRef,a.Renderer],{name:[0,"name"]},null),(n()(),a["ɵted"](-1,0,["\n        "])),(n()(),a["ɵeld"](14,0,null,0,2,"ion-badge",[["color","secondary"]],null,null,null,null,null)),a["ɵdid"](15,16384,null,0,F.a,[w.a,a.ElementRef,a.Renderer],{color:[0,"color"]},null),(n()(),a["ɵted"](16,null,["",""])),(n()(),a["ɵted"](-1,0,["\n\n      "])),(n()(),a["ɵted"](-1,null,["\n    "])),(n()(),a["ɵted"](-1,null,["\n  "]))],function(n,l){n(l,5,0,"");n(l,12,0,"md-notifications");n(l,15,0,"secondary")},function(n,l){n(l,9,0,l.context.$implicit.name);n(l,11,0,a["ɵnov"](l,12)._hidden);n(l,16,0,l.context.$implicit.UnRead)})}function o(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,0,null,null,8,"div",[["style","text-align: center;color: #10384F"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n      "])),(n()(),a["ɵeld"](2,0,null,null,5,"ion-card",[],null,null,null,null,null)),a["ɵdid"](3,16384,null,0,x.a,[w.a,a.ElementRef,a.Renderer],null,null),(n()(),a["ɵted"](-1,null,["\n        "])),(n()(),a["ɵeld"](5,0,null,null,1,"label",[["style","color: white; font-size: 15px"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n         No records found.\n        "])),(n()(),a["ɵted"](-1,null,["\n      "])),(n()(),a["ɵted"](-1,null,["\n  "]))],null,null)}function i(n){return a["ɵvid"](0,[(n()(),a["ɵted"](-1,null,["\n"])),(n()(),a["ɵeld"](1,0,null,null,10,"ion-header",[],null,null,null,null,null)),a["ɵdid"](2,16384,null,0,S.a,[w.a,a.ElementRef,a.Renderer,[2,M.a]],null,null),(n()(),a["ɵted"](-1,null,["\n\n  "])),(n()(),a["ɵeld"](4,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,k.b,k.a)),a["ɵdid"](5,49152,null,0,D.a,[O.a,[2,M.a],[2,U.a],w.a,a.ElementRef,a.Renderer],null,null),(n()(),a["ɵted"](-1,3,["\n    "])),(n()(),a["ɵeld"](7,0,null,3,2,"ion-title",[],null,null,null,_.b,_.a)),a["ɵdid"](8,49152,null,0,A.a,[w.a,a.ElementRef,a.Renderer,[2,V.a],[2,D.a]],null,null),(n()(),a["ɵted"](-1,0,["Notifications"])),(n()(),a["ɵted"](-1,3,["\n  "])),(n()(),a["ɵted"](-1,null,["\n\n"])),(n()(),a["ɵted"](-1,null,["\n\n\n"])),(n()(),a["ɵeld"](13,0,null,null,8,"ion-content",[["class","bg"],["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,j.b,j.a)),a["ɵdid"](14,4374528,null,0,T.a,[w.a,z.a,J.a,a.ElementRef,a.Renderer,O.a,$.a,a.NgZone,[2,M.a],[2,U.a]],null,null),(n()(),a["ɵted"](-1,1,["\n\n  "])),(n()(),a["ɵand"](16777216,null,1,1,null,t)),a["ɵdid"](17,802816,null,0,B.NgForOf,[a.ViewContainerRef,a.TemplateRef,a.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),a["ɵted"](-1,1,["\n  "])),(n()(),a["ɵand"](16777216,null,1,1,null,o)),a["ɵdid"](20,16384,null,0,B.NgIf,[a.ViewContainerRef,a.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),a["ɵted"](-1,1,["\n\n"]))],function(n,l){var e=l.component;n(l,17,0,e.Notifications);n(l,20,0,e.nodata)},function(n,l){n(l,4,0,a["ɵnov"](l,5)._hidden,a["ɵnov"](l,5)._sbPadding);n(l,13,0,a["ɵnov"](l,14).statusbarPadding,a["ɵnov"](l,14)._hasRefresher)})}Object.defineProperty(l,"__esModule",{value:!0});var a=e(1),u=(e(0),e(32),e(29)),r=e(54),s=e(79),d=e(44),c=e(105),p=function(){function n(n,l,e,t,o,i,a){this.toastCtrl=n,this.iab=l,this.navCtrl=e,this.navParams=t,this.nativeStorage=o,this.loadingCtrl=i,this.http=a,this.options={location:"yes",hidden:"no",clearcache:"yes",clearsessioncache:"yes",zoom:"yes",hardwareback:"yes",mediaPlaybackRequiresUserAction:"no",shouldPauseOnSuspend:"no",closebuttoncaption:"Close",disallowoverscroll:"no",toolbar:"yes",enableViewportScale:"no",allowInlineMediaPlayback:"no",presentationstyle:"pagesheet",fullscreen:"yes",hideurlbar:"yes",footer:"no"}}return n.prototype.ionViewDidLoad=function(){console.log("ionViewDidLoad NotificationsPage")},n.prototype.ionViewDidEnter=function(){var n=this;this.nativeStorage.getItem("userID").then(function(l){console.log("URID from page dashoard"+l),n.userId=l,console.log("User Id:"+n.userId),n.getAllNotifcations(n.userId)},function(n){return console.error(n)}),console.log("ionViewDidEnter:notifiaction updated")},n.prototype.getAllNotifcations=function(n){var l=this,e=this.loadingCtrl.create({content:"Please wait..."});e.present(),this.http.get(s.a.URL+"fetchnotificationgroupbyidx/"+n).map(function(n){return n.json()}).subscribe(function(t){console.log(s.a.URL+"fetchnotificationgroupbyidx/"+n);var o=JSON.parse(t);l.Notifications=o,e.dismiss(),console.log(l.Notifications),l.nodata=void 0===l.Notifications[0]},function(n){e.dismiss(),console.log(n)})},n.prototype.gotoNoti=function(n,l){console.log(n),"Sales Order"===n?(this.nativeStorage.setItem("salesType","order").then(function(){return console.log("Stored item!")},function(n){return console.error("Error storing item",n)}),this.navCtrl.push("NotifcationListPage",{Name:"1",Lim:l})):"Sales Return"===n?(this.nativeStorage.setItem("salesType","return").then(function(){return console.log("Stored item!")},function(n){return console.error("Error storing item",n)}),this.navCtrl.push("NotifcationListPage",{Name:"2"})):"Complains"===n?this.navCtrl.push("NotifcationListPage",{Name:"4"}):"Schemes"===n?(console.log(n),this.navCtrl.push("NotifcationListPage",{Name:"3"})):"Ledger Report"===n&&this.getLedgerFileName(this.userId,"5")},n.prototype.Viewfile=function(n,l){var e=this;this.urlapp=s.a.WEB_APP_URL+"MyDocs/",this.iab.create(this.urlapp+n,"_system",this.options),console.log(this.urlapp+n),setTimeout(function(){e.updateNotification(e.userId,l),console.log("clear")},5e3)},n.prototype.updateNotification=function(n,l){var e=this;console.log(n,l);var t=new r.d({Accept:"application/json","Content-Type":"application/json"}),o=new r.g({headers:t});return new Promise(function(t,i){e.http.post(s.a.URL+"fetchnotificationupdateidx/"+n+"/Ledger Report/"+l,o).toPromise().then(function(n){console.log("API Response : ",n.json()),t(n.json())}).catch(function(n){console.error("API Error : ",n.status),console.error("API Error : ",JSON.stringify(n)),i(n.json())})})},n.prototype.getLedgerFileName=function(n,l){var e=this;return new Promise(function(t){var o=e.loadingCtrl.create({spinner:"bubbles",content:"\n          \n          <div>Loading...</div>"});o.present(),e.http.get(s.a.URL+"fetchpendingnotifications/"+n+"/"+l).map(function(n){return n.json()}).subscribe(function(n){var l=JSON.parse(n);if(e.posts=l,console.log(e.posts),t(!0),void 0===e.posts[0]){e.toastCtrl.create({message:"Sorry no report found.You can check your reports in My Documents.",duration:3e3,position:"bottom"}).present()}else console.log("FileName",e.posts[0].filename),e.Viewfile(e.posts[0].filename,e.posts[0].idx);o.dismiss()},function(n){console.log(n),o.dismiss()})})},n}(),f=function(){return function(){}}(),m=e(213),g=e(214),h=e(215),b=e(216),v=e(217),y=e(218),R=e(219),N=e(220),C=e(221),L=e(26),P=e(17),w=e(3),I=e(64),E=e(33),F=e(116),x=e(104),S=e(53),M=e(7),k=e(70),D=e(36),O=e(8),U=e(20),_=e(163),A=e(73),V=e(38),j=e(52),T=e(25),z=e(5),J=e(9),$=e(24),B=e(14),q=e(82),W=e(15),Y=e(62),Z=a["ɵcrt"]({encapsulation:2,styles:[],data:{}}),G=a["ɵccf"]("page-notifications",p,function(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,0,null,null,1,"page-notifications",[],null,null,null,i,Z)),a["ɵdid"](1,49152,null,0,p,[q.a,c.a,U.a,W.a,u.a,Y.a,d.a],null,null)],null,null)},{},{},[]),H=e(19),K=e(162),Q=e(61);e.d(l,"NotificationsPageModuleNgFactory",function(){return X});var X=a["ɵcmf"](f,[],function(n){return a["ɵmod"]([a["ɵmpd"](512,a.ComponentFactoryResolver,a["ɵCodegenComponentFactoryResolver"],[[8,[m.a,g.a,h.a,b.a,v.a,y.a,R.a,N.a,C.a,G]],[3,a.ComponentFactoryResolver],a.NgModuleRef]),a["ɵmpd"](4608,B.NgLocalization,B.NgLocaleLocalization,[a.LOCALE_ID,[2,B["ɵa"]]]),a["ɵmpd"](4608,H["ɵi"],H["ɵi"],[]),a["ɵmpd"](4608,H.FormBuilder,H.FormBuilder,[]),a["ɵmpd"](512,B.CommonModule,B.CommonModule,[]),a["ɵmpd"](512,H["ɵba"],H["ɵba"],[]),a["ɵmpd"](512,H.FormsModule,H.FormsModule,[]),a["ɵmpd"](512,H.ReactiveFormsModule,H.ReactiveFormsModule,[]),a["ɵmpd"](512,K.a,K.a,[]),a["ɵmpd"](512,K.b,K.b,[]),a["ɵmpd"](512,f,f,[]),a["ɵmpd"](256,Q.a,p,[])])})}});