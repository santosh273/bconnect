<!--
  Generated template for the MakeNewOrderPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <!-- <ion-title>Sales Order-New Request</ion-title> -->
    <!-- <p style="font-size: 20px;margin: 4px"><font style="color: #424242;"><b>Sales Order-New Request</b></font> </p> -->
    <p style="font-size: 17px;margin: 3px;padding-top:3px"><font style="color: #424242;"><b>Sales Order-New Request</b></font> <img align="right" style="height: 46px;width: 45px; margin-top: -13px;" src="assets/imgs/Bayer.png"></p>
  </ion-navbar>

</ion-header>


<ion-content class="bg" >

    <style>
        .dropbtn {
            background-color: #4CAF50;
            color: white;
            padding: 16px;
            font-size: 16px;
            border: none;
            cursor: pointer;
        }
        
        .dropbtn:hover, .dropbtn:focus {
            background-color: #3e8e41;
        }
        
        #myInput {
            border-box: box-sizing;
            background-image: url('assets/imgs/s3.jpg');
            background-position: 4px 12px;
            background-repeat: no-repeat;
            font-size: 16px;
            padding: 14px 20px 12px 45px;
            /* border: none; */
            width: calc(100% - 2px);
            border: 2px solid rgb(192, 245, 203);
           
        }
        
        #myInput:focus {outline: 3px solid #10384F;}
        
        /* .dropdown {
            position: relative;
            display: inline-block;
        } */
        
        .dropdown-content {
           
            position: absolute;
            background-color: #10384F;
            min-width: 230px;
            overflow: auto;
            border: 1px solid #10384F;
            z-index: 1;
        }
        
        .dropdown-content option {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }
        
        .dropdown option:hover {background-color: #ddd;}
        
        .show {display: block;}
        </style>
        
        
        <!-- <h2>Search/Filter Dropdown</h2>
        <p>Click on the button to open the dropdown menu, and use the input field to search for a specific dropdown link.</p> -->
        
        <!-- <div class="dropdown">
     
          <div id="myDropdown" class="dropdown-content">
            <input type="text" placeholder="Search.." id="myInput" (keyup)="filterFunction()">
            <select (ionChange)="getCrditBySelectedCust()" style="height: 30px;width:100%" [(ngModel)]="selectedCust">
           <option *ngFor="let cust of customers" value="{{cust.Idx}}">{{cust.CustomerName}} </option>
          </select> 
        
          </div>
        </div> -->
        
      
    
      <!-- //////html End -->
    <ion-card no-lines style="margin-top: 8px">
        <ion-item  class="trns" style="padding-left: 30px;background-color: #10384F;">
    
            <ion-label style=" color: rgb(255, 255, 255);"><b>Date *:</b></ion-label>
            <ion-datetime style=" color: rgb(76, 231, 76); " min="{{date}}" max="2050"  [(ngModel)]="date"></ion-datetime>
        </ion-item>

        <!-- <ion-item *ngIf="isAso" class="trns" style="padding-left: 30px;background-color: #10384F;"> -->
            <!-- <ion-item style="padding-left: 0px;" class="trns">  -->
                <!-- hello               -->
            <!-- <ion-label class="trns" style="padding: 0px;color: #ffffff">Customer *</ion-label>
            <ion-select #select1 placeholder=" Please Select" style="border: 1px solid rgb(192, 245, 203);color: #ffffff;" class="trns" interface="action-sheet"  [(ngModel)]="selectedCust" (ionChange)="getCrditBySelectedCust()">
              
              <ion-option  *ngFor="let cust of customers" value="{{cust.Idx}}">{{cust.CustomerName}}</ion-option>
            
            </ion-select> -->
           <!-- ///////html////// -->
 
            
            <!-- </ion-item>  -->
           
               
        <!-- </ion-item> -->
        <ion-item *ngIf="isAso" style="background-color:#10384F;color: white ">
            <!-- <div id="myDropdown" >
              <input style="background-color:white " type="text" placeholder="&nbsp;&nbsp;search customer" id="myInput" (keyup)="filterFunction()">
              <br>
              <select #select1 placeholder=" select customer" style="height: 30px;width:100%"  (change)="getCrditBySelectedCust()" [(ngModel)]="selectedCust">
             <option *ngFor="let cust of customers" value="{{cust.Idx}}">{{cust.CustomerName}} </option>
            </select>  -->
          
            
            <ion-label style="color: white">Customers</ion-label>
                <select-searchable #select1
                item-content
                [(ngModel)]="selectedCust"
                [items]="customers"
                itemValueField="Idx"
                itemTextField="CustomerName"
                [canSearch]="true"
                (onClose)="onClose($event)"
                (onChange)="portChange($event)">
                </select-searchable>
          </ion-item>
    </ion-card>
    <ion-card style="background-color: #00617F">
    <ion-card-header>
      <font style="color: #66B512">Payment</font>  
      </ion-card-header>

      <ion-card-content >
        <ion-list>
         <!-- <ion-item *ngFor="let row of rows">Row</ion-item> -->
        
        </ion-list>
          <details open>
              <summary>Add Payment</summary>
              <ion-grid *ngFor="let row of rows;let i = index">

                  <ion-row>
                      <!-- <ion-col col-6 style="text-align: center"><font style="color: #0075A6;"><b> Bank</b></font></ion-col> -->
                      <ion-col col-12 style="text-align: center">
                          <ion-item style="padding-left: 0px;" class="trns"> 
                              <ion-label  class="trns" style="padding: 0px;color: #ffffff">Payment Type *</ion-label>
                              <ion-select #select1 placeholder="Please Select" style="border: 1px solid rgb(192, 245, 203);padding: 0px;color:#ffffff;margin-right: 5px;padding-right: 7px;padding-left:3px" class="trns" interface="action-sheet" (ionChange)="PaymentType(i)" [(ngModel)]="selectedType[i]">
                                
                                  <ion-option  value="Cash" >Cash</ion-option>
                                  <ion-option  value="Advance" >Advance</ion-option>
                                  <ion-option *ngIf="credit"   value="Credit" >Credit</ion-option>
                                <!-- <ion-option *ngFor="let type of payments" value="{{type.paymentType}}">{{type.paymentType}}</ion-option> -->
                              
                              </ion-select>
                            </ion-item> </ion-col>
                    </ion-row>
                    <div >
                    <ion-row>
                        <!-- <ion-col col-6>BDS No:</ion-col> -->
                        <ion-col col-6 > <ion-item style="padding-left: 0px;" class="trns"><ion-label>BDS No *:</ion-label></ion-item></ion-col>
                        
                            <ion-col class="trns" *ngIf="paymentype[i] === 1" col-6 ion-item no-lines ><ion-input #inputBDSASO  (keypress)="eventHandlerBDS($event.keyCode)" disabled="true" class="trns" [(ngModel)]="bdsNo[i]" style="border: 1px solid rgb(192, 245, 203);height:30px;margin-top: -8px"></ion-input > </ion-col>                              
                       

                        
                        <ion-col class="trns" *ngIf="paymentype[i] != 1 " col-6 ion-item no-lines ><ion-input  #inputBDS  (keypress)="eventHandlerBDS($event.keyCode)" class="trns" [(ngModel)]="bdsNo[i]" style="border: 1px solid rgb(192, 245, 203);height:30px;margin-top: -8px"></ion-input > 
                         
                        </ion-col>
                       

                        </ion-row>
                  <ion-row>
                    <!-- <ion-col col-6 > <font style="color: #0075A6;"><b>Payment Type:</b></font></ion-col>
                    <ion-col col-6 style="text-align: center">Online </ion-col> -->
                    <ion-col col-12 style="text-align: center" *ngIf="paymentype[i] === 1">
                        <ion-item style="padding-left: 0px;" class="trns"> 
                              
                              <ion-label class="trns" style="padding: 0px;color: #ffffff">Bank *:</ion-label>
                          <ion-select #selectbank placeholder=" Please Select" style="padding: 0px;color:#ffffff;margin-right: 5px;padding-right: 7px;padding-left:3px" class="trns" interface="action-sheet" disabled="true" [(ngModel)]="selectedBank[i]" (ionChange)="SelectedBankChan(i)">
                            
                            <ion-option  *ngFor="let bank of banks" value="{{bank.Bankname}}">{{bank.Bankname}}</ion-option>
                          
                          </ion-select>
                          
                          </ion-item> </ion-col>

                          <ion-col col-12 style="text-align: center"  *ngIf="paymentype[i] != 1 ">
                              <ion-item style="padding-left: 0px;" class="trns"> 
                                    
                                    <ion-label class="trns" style="padding: 0px;color: #ffffff">Bank *:</ion-label>
                                <ion-select #selectbank placeholder=" Please Select" style="border: 1px solid rgb(192, 245, 203);padding: 0px;color:#ffffff;margin-right: 5px;padding-right: 7px;padding-left:3px" class="trns" interface="action-sheet"  [(ngModel)]="selectedBank[i]" (ionChange)="SelectedBankChan(i)">
                                  
                                  <ion-option  *ngFor="let bank of banks" value="{{bank.Bankname}}">{{bank.Bankname}}</ion-option>
                                
                                </ion-select>
                                
                                </ion-item> </ion-col>

                  </ion-row>
                 
                  
                  <ion-row >
                      
                      <ion-col col-6 > <ion-item style="padding-left: 0px;" class="trns"><ion-label>Amount *:</ion-label></ion-item></ion-col>
                      <ion-col class="trns" *ngIf="paymentype[i] === 1" #inputAmountASO (keypress)="eventHandlerAmount($event.keyCode,i)" col-6 ion-item no-lines style="text-align: center"><ion-input disabled="true" (keyup)="sumAllAmounts()" class="trns" type="number" [(ngModel)]="amount[i]" style="border: 1px solid rgb(192, 245, 203);height:30px;margin-top: -8px"></ion-input> </ion-col>
                      <ion-col class="trns" *ngIf="paymentype[i] != 1 " #inputAmount (keypress)="eventHandlerAmount($event.keyCode,i)" col-6 ion-item no-lines style="text-align: center"><ion-input (keyup)="sumAllAmounts()" class="trns" type="number" [(ngModel)]="amount[i]" style="border: 1px solid rgb(192, 245, 203);height:30px;margin-top: -8px"></ion-input> </ion-col>
                    </ion-row>

                    <ion-row>
                      <ion-col col-6> <ion-item style="padding-left: 0px;" class="trns"><ion-label>Attachment:</ion-label></ion-item></ion-col>
                      <ion-col class="trns" col-6 ion-item no-lines style="text-align: center;margin-top: -9px;">
                        <ion-buttons>
                        <button ion-button icon-left (click)="presentActionSheet(i)">
                          <ion-icon name="camera"></ion-icon>Choose
                        </button>
                        </ion-buttons>
                      </ion-col>
                    </ion-row>
                    <ion-row  *ngIf="imagePath[i] != undefined">
                        <ion-col col-6> <ion-item style="padding-left: 0px;" class="trns"><ion-label></ion-label></ion-item></ion-col>
                        <ion-col class="trns" col-5 ion-item no-lines style="text-align: center;margin-top: -9px;">
                        <img src="{{pathForImage(imagePath[i])}}" width="50" height="50" (click)=" showImg(pathForImage(imagePath[i]))">
                        </ion-col>
                    </ion-row>
                  </div>
                    <ion-row>
                      <ion-col col-12 style="text-align: right"><img align="right"  src="assets/imgs/delet.png" (click)="splicerow('rows',i)" style="height: 20px;width:20px"></ion-col>
                    </ion-row>
                    <hr>
                </ion-grid>
                <div style="text-align: right;margin-bottom: 4px">  <img align="right"  src="assets/imgs/add_icon.png" (click)="addrow()"  style="height: 20px;width:20px;margin-bottom: 4px"></div>
              </details>
        <!-- <ion-item> -->
           
        <!-- </ion-item> -->
        
        
      </ion-card-content>
     
    </ion-card>
    <ion-card style="background-color: #00617F">
        <ion-card-header>
          <font style="color: #66B512">Products</font>  
          </ion-card-header>
    
          <ion-card-content >
              <details>
                  <summary (click)=" chekAmount()">Add Product</summary>
                  <ion-grid *ngFor="let row of pdrows;let i = index">
                      <ion-row  (click)=" chekAmount()">
                        <!-- <ion-col col-6 > <font style="color: #0075A6;"><b>Payment Type:</b></font></ion-col>
                        <ion-col col-6 style="text-align: center">Online </ion-col> -->
                        <ion-col col-12 style="text-align: center">
                            <ion-item style="padding-left: 0px;" class="trns"> 
                              <ion-label  class="trns" style="padding: 0px;color: #ffffff; ">Products *:</ion-label>
                              <ion-select placeholder="Please Select" class="trns" interface="action-sheet" style="border: 1px solid rgb(192, 245, 203);padding: 0px;color:#ffffff;margin-right: 5px;padding-right: 7px;padding-left:3px"   (ionChange)="calXquntity(i)"  [(ngModel)]="selectedPrdouct[i]">
                                
                                <ion-option *ngFor="let pro of products" value="{{pro.idx}}">{{pro.ProductName}}</ion-option>
                              
                              </ion-select>
                              
                              </ion-item> </ion-col>
                      </ion-row>
                      <!-- <ion-row>
                        <ion-col col-6>Carton:</ion-col>
                        <ion-col col-6 ><ion-input [(ngModel)]="catron" style="border: 1px solid rgb(192, 245, 203);height:30px;margin-top: -8px"></ion-input > </ion-col>
                      </ion-row> -->
                      <ion-row  >
                        <ion-col col-6><ion-item style="padding-left: 0px;" class="trns"><ion-label>Cartons *:</ion-label></ion-item></ion-col>
                        <ion-col  class="trns" (click)=" chekAmount()" col-6 ion-item no-lines ><ion-input (keyup)="calXquntity(i)" (click)=" chekAmount()" type="number" [(ngModel)]="quantity[i]"  style="border: 1px solid rgb(192, 245, 203);height:30px;margin-top: -8px"></ion-input > </ion-col>
                      </ion-row>
                      <ion-row  >
                        <ion-col col-6><ion-item style="padding-left: 0px;" class="trns"><ion-label>Pieces/carton *:</ion-label></ion-item></ion-col>
                        <ion-col  class="trns"  col-6 ion-item no-lines ><ion-input  type="number" disabled="true" value="{{procal[i]}}"   style="border: 1px solid rgb(192, 245, 203);height:30px;margin-top: -8px"></ion-input > </ion-col>
                      </ion-row>
                      <ion-row  >
                        <ion-col col-6><ion-item style="padding-left: 0px;" class="trns"><ion-label>Quantity *:</ion-label></ion-item></ion-col>
                        <ion-col  class="trns" (click)=" chekAmount()" col-6 ion-item no-lines ><ion-input  (click)=" chekAmount()" type="number" disabled="true" value="{{products[0].calValue}" [(ngModel)]="calValue[i]"  style="border: 1px solid rgb(192, 245, 203);height:30px;margin-top: -8px"></ion-input > </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col col-12 style="text-align: right"><img align="right" src="assets/imgs/delet.png" (click)="splicerow('pdrows',i)" style="height: 17px;width:17px" ></ion-col>
                      </ion-row>
                     <hr>
                    </ion-grid>
                    <div style="text-align: right">  <img align="right" src="assets/imgs/add_icon.png" style="height: 20px;width:20px;margin-bottom: 4px" (click)="pdaddrow()"></div>
                  </details>
            <!-- <ion-item> -->
            <!-- </ion-item> -->
          </ion-card-content>
         
        </ion-card>
        <ion-card style="background-color: #00617F">
          <!-- <ion-grid>
            <ion-row>
              <ion-col col-12 ion-item no-lines  style="background-color: #00617F"><textarea style="background-color: #00617F" ion-item #myInput id="myInput" rows="2" maxLength="500" placeholder="Remarks" (keyup)="resize()" [(ngModel)]="remarks"></textarea></ion-col>
            </ion-row>
          </ion-grid> -->
            <ion-card-content >
                <ion-textarea style="border: 1px solid white;  background-color: #00617F" placeholder="Remarks" rows="3" maxLength="500" [(ngModel)]="remarks" ></ion-textarea>
            </ion-card-content>
        </ion-card>
      <div style="text-align: center">
        <button ion-button color="thm" round style="text-transform: none;" *ngIf="hideaftersubmit" (click)="chkData()">Submit Order</button>
      </div>

      <!-- <ion-grid>
          <ion-row *ngFor="let row of rows">
            <ion-col>
              {{ row?.firstCol }}
            </ion-col>
            <ion-col>
              {{ row?.secondCol }}
            </ion-col>
          </ion-row>
        </ion-grid>
        <button ion-button [disabled]="rows?.length === maxQuantity" (click)="addrow()">Add a row</button>
       -->


</ion-content>
