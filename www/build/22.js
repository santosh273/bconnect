webpackJsonp([22],{698:function(l,n,e){"use strict";function t(l){return u["ɵvid"](0,[(l()(),u["ɵeld"](0,0,null,null,1,"div",[["class","checkbox-icon"]],[[2,"checkbox-checked",null]],null,null,null,null)),(l()(),u["ɵeld"](1,0,null,null,0,"div",[["class","checkbox-inner"]],null,null,null,null,null)),(l()(),u["ɵeld"](2,0,null,null,2,"button",[["class","item-cover"],["ion-button","item-cover"],["role","checkbox"],["type","button"]],[[8,"id",0],[1,"aria-checked",0],[1,"aria-labelledby",0],[1,"aria-disabled",0]],null,null,P.b,P.a)),u["ɵdid"](3,1097728,null,0,N.a,[[8,"item-cover"],k.a,u.ElementRef,u.Renderer],null,null),(l()(),u["ɵted"](-1,0,[" "]))],null,function(l,n){var e=n.component;l(n,0,0,e._value);l(n,2,0,e.id,e._value,e._labelId,e._disabled)})}function o(l){return u["ɵvid"](0,[(l()(),u["ɵeld"](0,0,null,null,29,"ion-row",[["class","row"],["style","padding:1px; border-bottom:2px solid #3b5998; border-left:2px solid #3b5998;height: 100px;border-left-style:dashed ;border-bottom-left-radius: 40px"]],null,null,null,null,null)),u["ɵdid"](1,16384,null,0,C.a,[],null,null),(l()(),u["ɵted"](-1,null,["\n    "])),(l()(),u["ɵeld"](3,0,null,null,7,"ion-col",[["class","col"],["col-1",""]],null,null,null,null,null)),u["ɵdid"](4,16384,null,0,x.a,[],null,null),(l()(),u["ɵeld"](5,0,null,null,5,"ion-checkbox",[],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"]],function(l,n,e){var t=!0,o=l.component;if("click"===n){t=!1!==u["ɵnov"](l,6)._click(e)&&t}if("ngModelChange"===n){t=!1!==(o.giftt[l.context.index]=e)&&t}if("ionChange"===n){t=!1!==o.consol()&&t}return t},t,L)),u["ɵdid"](6,1228800,null,0,_.a,[k.a,E.a,[2,I.a],u.ElementRef,u.Renderer],null,{ionChange:"ionChange"}),u["ɵprd"](1024,null,D.NG_VALUE_ACCESSOR,function(l){return[l]},[_.a]),u["ɵdid"](8,671744,null,0,D.NgModel,[[8,null],[8,null],[8,null],[2,D.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),u["ɵprd"](2048,null,D.NgControl,null,[D.NgModel]),u["ɵdid"](10,16384,null,0,D.NgControlStatus,[D.NgControl],null,null),(l()(),u["ɵted"](-1,null,["\n    "])),(l()(),u["ɵeld"](12,0,null,null,2,"ion-col",[["class","col"],["col-4",""]],null,null,null,null,null)),u["ɵdid"](13,16384,null,0,x.a,[],null,null),(l()(),u["ɵeld"](14,0,null,null,0,"img",[["style","height: 91px;border-radius: 5px;"]],[[8,"src",4]],null,null,null,null)),(l()(),u["ɵted"](-1,null,["\n    "])),(l()(),u["ɵeld"](16,0,null,null,11,"ion-col",[["class","col"],["col-4",""],["style","padding-left: 2px"]],null,null,null,null,null)),u["ɵdid"](17,16384,null,0,x.a,[],null,null),(l()(),u["ɵted"](-1,null,[" "])),(l()(),u["ɵeld"](19,0,null,null,8,"p",[],null,null,null,null,null)),(l()(),u["ɵeld"](20,0,null,null,7,"b",[],null,null,null,null,null)),(l()(),u["ɵeld"](21,0,null,null,1,"font",[["style","color: darkviolet"]],null,null,null,null,null)),(l()(),u["ɵted"](22,null,["Points: ",""])),(l()(),u["ɵted"](-1,null,[" "])),(l()(),u["ɵeld"](24,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u["ɵeld"](25,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u["ɵeld"](26,0,null,null,1,"font",[["style","color: #3b5998"]],null,null,null,null,null)),(l()(),u["ɵted"](27,null,[" Desc: ",""])),(l()(),u["ɵted"](-1,null,["\n   \n    "])),(l()(),u["ɵted"](-1,null,["\n  "]))],function(l,n){l(n,8,0,n.component.giftt[n.context.index])},function(l,n){var e=n.component;l(n,5,0,u["ɵnov"](n,6)._disabled,u["ɵnov"](n,10).ngClassUntouched,u["ɵnov"](n,10).ngClassTouched,u["ɵnov"](n,10).ngClassPristine,u["ɵnov"](n,10).ngClassDirty,u["ɵnov"](n,10).ngClassValid,u["ɵnov"](n,10).ngClassInvalid,u["ɵnov"](n,10).ngClassPending);l(n,14,0,u["ɵinlineInterpolate"](2,"",e.imageUrl,"",n.context.$implicit.images,""));l(n,22,0,n.context.$implicit.points);l(n,27,0,n.context.$implicit.description)})}function i(l){return u["ɵvid"](0,[(l()(),u["ɵted"](-1,null,["\n"])),(l()(),u["ɵeld"](1,0,null,null,10,"ion-header",[],null,null,null,null,null)),u["ɵdid"](2,16384,null,0,w.a,[k.a,u.ElementRef,u.Renderer,[2,G.a]],null,null),(l()(),u["ɵted"](-1,null,["\n\n  "])),(l()(),u["ɵeld"](4,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,S.b,S.a)),u["ɵdid"](5,49152,null,0,U.a,[F.a,[2,G.a],[2,M.a],k.a,u.ElementRef,u.Renderer],null,null),(l()(),u["ɵted"](-1,3,["\n    "])),(l()(),u["ɵeld"](7,0,null,3,2,"ion-title",[],null,null,null,O.b,O.a)),u["ɵdid"](8,49152,null,0,q.a,[k.a,u.ElementRef,u.Renderer,[2,A.a],[2,U.a]],null,null),(l()(),u["ɵted"](-1,0,["Gifts "])),(l()(),u["ɵted"](-1,3,["\n  "])),(l()(),u["ɵted"](-1,null,["\n\n"])),(l()(),u["ɵted"](-1,null,["\n\n\n"])),(l()(),u["ɵeld"](13,0,null,null,44,"ion-content",[["class","bg"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,T.b,T.a)),u["ɵdid"](14,4374528,null,0,j.a,[k.a,z.a,V.a,u.ElementRef,u.Renderer,F.a,B.a,u.NgZone,[2,G.a],[2,M.a]],null,null),(l()(),u["ɵted"](-1,1,["\n  "])),(l()(),u["ɵeld"](16,0,null,1,13,"div",[["style","margin: 6px"]],null,null,null,null,null)),(l()(),u["ɵted"](-1,null,["\n    "])),(l()(),u["ɵeld"](18,0,null,null,10,"ion-row",[["class","row"],["style","border-bottom: 1px solid"]],null,null,null,null,null)),u["ɵdid"](19,16384,null,0,C.a,[],null,null),(l()(),u["ɵted"](-1,null,["\n        "])),(l()(),u["ɵeld"](21,0,null,null,2,"ion-col",[["class","col"],["col-6",""],["style","font-size: 16px"]],null,null,null,null,null)),u["ɵdid"](22,16384,null,0,x.a,[],null,null),(l()(),u["ɵted"](23,null,["Total Points: ",""])),(l()(),u["ɵted"](-1,null,["\n        "])),(l()(),u["ɵeld"](25,0,null,null,2,"ion-col",[["class","col"],["col-6",""],["style","font-size: 16px;text-align: right;color: #3b5998"]],null,null,null,null,null)),u["ɵdid"](26,16384,null,0,x.a,[],null,null),(l()(),u["ɵted"](27,null,["Consumed Points : ",""])),(l()(),u["ɵted"](-1,null,["\n      "])),(l()(),u["ɵted"](-1,null,["\n    "])),(l()(),u["ɵted"](-1,1,["\n"])),(l()(),u["ɵeld"](31,0,null,1,17,"div",[["style","margin: 6px"]],null,null,null,null,null)),(l()(),u["ɵted"](-1,null,["\n  "])),(l()(),u["ɵeld"](33,0,null,null,10,"ion-row",[["class","row"],["style","border-bottom: 1px solid"]],null,null,null,null,null)),u["ɵdid"](34,16384,null,0,C.a,[],null,null),(l()(),u["ɵted"](-1,null,["\n    "])),(l()(),u["ɵeld"](36,0,null,null,2,"ion-col",[["class","col"],["col-6",""],["style","font-size: 16px"]],null,null,null,null,null)),u["ɵdid"](37,16384,null,0,x.a,[],null,null),(l()(),u["ɵted"](38,null,["Requested Points: ",""])),(l()(),u["ɵted"](-1,null,["\n    "])),(l()(),u["ɵeld"](40,0,null,null,2,"ion-col",[["class","col"],["col-6",""],["style","font-size: 16px;text-align: right;color: #3b5998"]],null,null,null,null,null)),u["ɵdid"](41,16384,null,0,x.a,[],null,null),(l()(),u["ɵted"](42,null,["Total Available : ",""])),(l()(),u["ɵted"](-1,null,["\n  "])),(l()(),u["ɵted"](-1,null,["\n"])),(l()(),u["ɵted"](-1,null,["\n  "])),(l()(),u["ɵand"](16777216,null,null,1,null,o)),u["ɵdid"](47,802816,null,0,J.NgForOf,[u.ViewContainerRef,u.TemplateRef,u.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),u["ɵted"](-1,null,["\n \n"])),(l()(),u["ɵted"](-1,1,["\n"])),(l()(),u["ɵeld"](50,0,null,1,2,"button",[["color","primary"],["ion-button",""],["style","left:2px;position: absolute"]],null,[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.showPrompt()&&t}return t},P.b,P.a)),u["ɵdid"](51,1097728,null,0,N.a,[[8,""],k.a,u.ElementRef,u.Renderer],{color:[0,"color"]},null),(l()(),u["ɵted"](-1,0,["Request Gifts"])),(l()(),u["ɵted"](-1,1,["\n"])),(l()(),u["ɵeld"](54,0,null,1,2,"button",[["color","primary"],["ion-button",""],["style","right:2px;position: absolute"]],null,[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.mygifts()&&t}return t},P.b,P.a)),u["ɵdid"](55,1097728,null,0,N.a,[[8,""],k.a,u.ElementRef,u.Renderer],{color:[0,"color"]},null),(l()(),u["ɵted"](-1,0,["Gifts Status"])),(l()(),u["ɵted"](-1,1,["\n"])),(l()(),u["ɵted"](-1,null,["\n"])),(l()(),u["ɵeld"](59,0,null,null,9,"ion-footer",[],null,null,null,null,null)),u["ɵdid"](60,16384,null,0,$.a,[k.a,u.ElementRef,u.Renderer,[2,G.a]],null,null),(l()(),u["ɵted"](-1,null,["\n  "])),(l()(),u["ɵeld"](62,0,null,null,5,"ion-toolbar",[["class","trns toolbar"]],[[2,"statusbar-padding",null]],null,null,H.b,H.a)),u["ɵdid"](63,49152,null,0,A.a,[k.a,u.ElementRef,u.Renderer],null,null),(l()(),u["ɵted"](-1,3,["\n  "])),(l()(),u["ɵeld"](65,0,null,3,1,"ion-icon",[["color","btnn"],["name","ios-information-circle-outline"],["role","img"],["style","    right: 5px;position: absolute;font-size: 35px;"]],[[2,"hide",null]],[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.disclaimer()&&t}return t},null,null)),u["ɵdid"](66,147456,null,0,K.a,[k.a,u.ElementRef,u.Renderer],{color:[0,"color"],name:[1,"name"]},null),(l()(),u["ɵted"](-1,3,["\n"])),(l()(),u["ɵted"](-1,null,["\n"])),(l()(),u["ɵted"](-1,null,["\n"]))],function(l,n){l(n,47,0,n.component.gifts);l(n,51,0,"primary");l(n,55,0,"primary");l(n,66,0,"btnn","ios-information-circle-outline")},function(l,n){var e=n.component;l(n,4,0,u["ɵnov"](n,5)._hidden,u["ɵnov"](n,5)._sbPadding);l(n,13,0,u["ɵnov"](n,14).statusbarPadding,u["ɵnov"](n,14)._hasRefresher);l(n,23,0,e.totalPoints);l(n,27,0,e.consumed);l(n,38,0,e.requested);l(n,42,0,e.available);l(n,62,0,u["ɵnov"](n,63)._sbPadding);l(n,65,0,u["ɵnov"](n,66)._hidden)})}Object.defineProperty(n,"__esModule",{value:!0});var u=e(1),s=(e(0),e(32),e(44)),a=(e(118),e(79)),r=e(29),d=function(){function l(l,n,e,t,o,i,u){var s=this;this.loadingCtrl=l,this.alertCtrl=n,this.toastCtrl=e,this.nativeStorage=t,this.navCtrl=o,this.navParams=i,this.http=u,this.giftspoints=0,this.totalPoints=0,this.loopcounter=0,this.imageUrl=a.a.WEB_APP_URL+"FilesFolder/",this.giftt=[],this.address=[],this.mailingaddress="",this.available=0,this.consumed=0,this.nativeStorage.getItem("profile").then(function(l){console.log("URID from page dashoard"+l),s.user=l,s.code=s.user[0].customerNo,s.mailingaddress=s.user[0].address,console.log("address:",s.user[0].address),console.log("userName:"+s.user[0].firstName+s.user[0].lastName),s.getPoints()},function(l){return console.error(l)}),this.nativeStorage.getItem("userID").then(function(l){console.log("URID from page dashoard"+l),s.userId=l})}return l.prototype.ionViewDidLoad=function(){console.log("ionViewDidLoad GiftsPage"),this.getGifts(),this.getDisclaimer()},l.prototype.consol=function(l,n){},l.prototype.getPoints=function(){var l=this,n=this.loadingCtrl.create({spinner:"dots"});n.onDidDismiss(function(){console.log("Dismissed loading")});var e=0,t=0;n.present(),console.log("THIS.CODE :::"+this.code),this.http.get(a.a.URL+"getcustomerpoints/"+this.code).map(function(l){return l.json()}).subscribe(function(o){console.log(a.a.URL+"getcustomerpoints/"+l.code),n.dismiss();var i=JSON.parse(o);l.points=i;for(var u=0,s=l.points;u<s.length;u++){var r=s[u];"BGP"!=r.labels?e+=Number(r.updated):t+=Number(r.updated),l.totalPoints=Number(r.totalPoints),l.requested=Number(r.requestedpoints),l.consumed=Number(r.consumedpoints),l.available=Number(r.availablepointstotal),console.log(r)}l.totalPoints=e,l.bgp=t},function(l){n.dismiss(),alert(l),console.log(l)}),this.http.get(a.a.URL+"rewardmonth").map(function(l){return l.json()}).subscribe(function(n){l.rewardmonth=n},function(l){alert(l),console.log(l)})},l.prototype.getRemaing=function(){var l=this,n=this.loadingCtrl.create({spinner:"dots"});n.present(),this.http.get(a.a.URL+"giftspendingpointcount/"+this.userId).map(function(l){return l.json()}).subscribe(function(e){console.log(a.a.URL+"giftspendingpointcount/"+l.userId),n.dismiss();var t=JSON.parse(e);l.remaing=t},function(l){n.dismiss(),alert(l),console.log(l)})},l.prototype.getGifts=function(){var l=this,n=this.loadingCtrl.create({spinner:"dots"});n.present(),this.http.get(a.a.URL+"getgifts").map(function(l){return l.json()}).subscribe(function(e){var t=JSON.parse(e);l.gifts=t,console.log(t),n.dismiss()},function(l){n.dismiss(),console.log(l)})},l.prototype.getDisclaimer=function(){var l=this,n=this.loadingCtrl.create({spinner:"dots"});n.present(),this.http.get(a.a.URL+"fetchdisclaimermessage").map(function(l){return l.json()}).subscribe(function(e){l.msg=e,console.log(e),l.nativeStorage.setItem("msg",l.msg),n.dismiss()},function(e){try{l.nativeStorage.getItem("msg").then(function(n){l.msg=n})}catch(l){}n.dismiss(),console.log(e)})},l.prototype.uploadGifts=function(l){if(this.giftt.length>0)for(var n=0;n<this.gifts.length;n++){this.giftt[n]&&(console.log(this.gifts[n],n),this.sendGiftReq(this.userId,this.gifts[n].idx,l,n).then(function(l){console.log("res",l)}))}else this.presentToast("No gift selected")},l.prototype.sendGiftReq=function(l,n,e,t){var o=this;return new Promise(function(i){var u=o.loadingCtrl.create({spinner:"dots"});u.onDidDismiss(function(){console.log("Dismissed loading")}),u.present(),o.http.get(a.a.URL+"customergiftinsert/"+l+"/"+n+"/"+e).map(function(l){return l.json()}).subscribe(function(l){u.dismiss(),o.giftt[t]=!1,0==o.loopcounter&&(o.disclaimer(),o.loopcounter=12,setTimeout(function(){o.getPoints()},3e3)),console.log(l),o.presentToast("Gift Requested"),i(!0)},function(l){u.dismiss(),alert(l),console.log(l),i(!1)})})},l.prototype.presentToast=function(l){var n=this.toastCtrl.create({message:l,duration:3e3,position:"top"});n.onDidDismiss(function(){console.log("Dismissed toast")}),n.present()},l.prototype.showPrompt=function(){var l=this;if("true"===this.rewardmonth){this.giftspoints=0;for(var n=0;n<this.gifts.length;n++)this.giftt[n]&&(this.giftspoints=this.giftspoints+Number(this.gifts[n].points),console.log(this.giftspoints));if(console.log("points:",this.totalPoints>this.giftspoints),this.available-this.requested<this.giftspoints)this.presentToast("You can only select gifts in your points range :(");else{this.alertCtrl.create({title:"Address",message:"Please enter your address to get your gift.",inputs:[{name:"address",value:this.mailingaddress,placeholder:"Address Here Please."}],buttons:[{text:"Cancel",handler:function(l){console.log("Cancel clicked")}},{text:"Request",handler:function(n){console.log(n.address),console.log(n),""!=n.address?l.uploadGifts(n.address):alert("Address  must not be null."),console.log("Saved clicked")}}]}).present()}}else alert("Bayer is currently not accepting Gift requests, It will be open in April and October ")},l.prototype.mygifts=function(){this.navCtrl.push("GiftsStatusPage")},l.prototype.disclaimer=function(){this.alertCtrl.create({title:"Disclaimer",message:this.msg,buttons:[{text:"OK",handler:function(l){console.log("OKEY clicked")}}]}).present()},l}(),c=function(){return function(){}}(),g=e(213),p=e(214),f=e(215),m=e(216),h=e(217),b=e(218),v=e(219),y=e(220),R=e(221),C=e(71),x=e(72),P=e(26),N=e(17),k=e(3),D=e(19),_=e(230),E=e(18),I=e(21),L=u["ɵcrt"]({encapsulation:2,styles:[],data:{}}),w=e(53),G=e(7),S=e(70),U=e(36),F=e(8),M=e(20),O=e(163),q=e(73),A=e(38),T=e(52),j=e(25),z=e(5),V=e(9),B=e(24),J=e(14),$=e(83),H=e(231),K=e(33),Y=e(62),W=e(74),Z=e(82),Q=e(15),X=u["ɵcrt"]({encapsulation:2,styles:[],data:{}}),ll=u["ɵccf"]("page-gifts",d,function(l){return u["ɵvid"](0,[(l()(),u["ɵeld"](0,0,null,null,1,"page-gifts",[],null,null,null,i,X)),u["ɵdid"](1,49152,null,0,d,[Y.a,W.a,Z.a,r.a,M.a,Q.a,s.a],null,null)],null,null)},{},{},[]),nl=e(162),el=e(61);e.d(n,"GiftsPageModuleNgFactory",function(){return tl});var tl=u["ɵcmf"](c,[],function(l){return u["ɵmod"]([u["ɵmpd"](512,u.ComponentFactoryResolver,u["ɵCodegenComponentFactoryResolver"],[[8,[g.a,p.a,f.a,m.a,h.a,b.a,v.a,y.a,R.a,ll]],[3,u.ComponentFactoryResolver],u.NgModuleRef]),u["ɵmpd"](4608,J.NgLocalization,J.NgLocaleLocalization,[u.LOCALE_ID,[2,J["ɵa"]]]),u["ɵmpd"](4608,D["ɵi"],D["ɵi"],[]),u["ɵmpd"](4608,D.FormBuilder,D.FormBuilder,[]),u["ɵmpd"](512,J.CommonModule,J.CommonModule,[]),u["ɵmpd"](512,D["ɵba"],D["ɵba"],[]),u["ɵmpd"](512,D.FormsModule,D.FormsModule,[]),u["ɵmpd"](512,D.ReactiveFormsModule,D.ReactiveFormsModule,[]),u["ɵmpd"](512,nl.a,nl.a,[]),u["ɵmpd"](512,nl.b,nl.b,[]),u["ɵmpd"](512,c,c,[]),u["ɵmpd"](256,el.a,d,[])])})}});